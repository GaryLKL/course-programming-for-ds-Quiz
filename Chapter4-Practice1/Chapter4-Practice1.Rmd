---
title: "Chapter4"
output: learnr::tutorial
runtime: shiny_prerendered
---

```{r setup, include=FALSE}
library(learnr)
knitr::opts_chunk$set(echo = FALSE)
```


## Practice 1

---

> Question 1 

```{r Prac1Quiz1}
quiz(
  question("If you type c(2L, 'a', 3.0, 4), how will the data type of \"2L\" be changed?",
    answer("From an integer to a character", correct = TRUE),
    answer("From a numeric to an integer"),
    answer("From an integer to a numeric"),
    answer("From a character to an integer"),
    incorrect = "Incorrect! Type help(c) and read the description part carefully.",
    allow_retry = TRUE
  )
)
```

解答：  
在Console中，輸入：c(2L, 'a', 3.0, 4)，  
輸出結果：[1] "2" "a" "3" "4"  
由於向量中，存在'a'的資料型態（data type）為character，  
可以看到輸出結果的每個元素都被雙引號包覆著，  
代表所有元素的資料型態都被設定為character，  
原本2L為integer，但在此向量的輸出結果為character。  


---

> Question 2

On line 3, show the first 10 rows of student. 
\
\
*(If you cannot figure it out, please click "hint".)*
```{r Prac1Quiz2, exercise=TRUE, exercise.lines = 5, exercise.eval=TRUE, message = F}
library(readr)
student <- read_csv("https://raw.githubusercontent.com/tpemartin/course-107-1-programming-for-data-science/master/data/student.csv")

```
```{r Prac1Quiz2-hint-1}
?head()
#Find the argument for setting the number of rows
```

```{r Prac1Quiz2-hint-2}
head(student, n = 10)
```

---

> Question 3

Now, finish the following requirement in only one step. \
1. Set gender as a factor. \
2. Change labels: 男性 to Male & 女性 to Female
\
\
*(If you cannot figure it out, please click "hint".)*
```{r Prac1Quiz3, exercise=TRUE, exercise.lines = 5}
gender <- c("男性", "男性", "女性", "男性", "女性", "男性")
```

```{r Prac1Quiz3-hint-1}
?factor
#Find the argument for setting the labels
```

```{r Prac1Quiz3-hint-2}
gender <- factor(x = gender, levels = c("男性", "女性"), labels = c("Male", "Female"))
```

---

## Practice 2 

*資料來源：[颱風資料庫](http://rdc28.cwb.gov.tw/TDB/ntdb/pageControl/typhoon)  *

> Question 1

**請將西元年(Year)轉成民國年份**  
**(舉例：2018 -> 107)**

步驟一：  
目前Year的資料型態為character，請利用as.integer函數將其轉變成integer型態，才能去做數學運算    

步驟二：  
減去1911  

```{r Prac2Quiz1, exercise = TRUE, exercise.lines = 10, exercise.eval = TRUE, message = FALSE}
library(readr)
library(stringr)
library(lubridate)
TyphoonData <- read_csv("https://raw.githubusercontent.com/GaryLKL/course-programming-for-ds-Quiz/master/TyphoonData.csv", col_types = cols(.default = col_character()))
Year <- TyphoonData$年份


```

```{r Prac2Quiz1-hint}
#step 1
Year <- as.integer(Year)
#step 2
Year <- Year - 1911
```

---

> Question 2

**承上題，假設你已經將Year轉成民國年份。**  
**請先將Year的資料型態轉變回character，並在時間的前後加上『民國』、『年』**  
**(舉例：107 -> 民國107年)**

步驟一：  
使用as.character函數，將Year的資料型態轉回character  

步驟二：  
使用stringr套件中的str_c函數，合併『民國』、『Year』、『年』

```{r Prac2Quiz2, exercise = TRUE, exercise.lines = 10, exercise.eval = TRUE, message = FALSE}
library(readr)
library(stringr)
library(lubridate)
TyphoonData <- read_csv("https://raw.githubusercontent.com/GaryLKL/course-programming-for-ds-Quiz/master/TyphoonData.csv", col_types = cols(.default = col_character()))
Year <- TyphoonData$年份
Year <- as.integer(Year) - 1911

```

```{r Prac2Quiz2-hint}
#step 1
Year <- as.character(Year)
#step 2
Year <- str_c("民國", Year, "年")
```

---

> Question 3

**請問哪一個月發布颱風警報的頻率最高?**  
**(變數Time為發布警報的時間)**  

步驟一：  
請用stringr套件的str_sub函數提出月份（第6、7位數字）

步驟二：  
再用table函數計算各月份的颱風警報頻率

```{r Prac2Quiz3, exercise = TRUE, exercise.lines = 10, exercise.eval = TRUE, message  = FALSE}
library(readr)
library(stringr)
TyphoonData <- read_csv("https://raw.githubusercontent.com/GaryLKL/course-programming-for-ds-Quiz/master/TyphoonData.csv", col_types = cols(.default = col_character()))
Time <- TyphoonData$發布警報時間
```

```{r Prac2Quiz3-hint-1}
#下方為提示、參考做法，並非解答。
library(stringr)
a <- c("1958-07-13 12:00", "1958-07-05 00:00", "1959-09-11 09:00")
b <- str_sub(a, start = 6, end = 7)
table(b)
```

```{r Prac2Quiz3-hint-2}
#解答
library(stringr)
Month <- str_sub(Time, 6,7)
table(Month)
#或直接
table(str_sub(Time, 6,7))
```



